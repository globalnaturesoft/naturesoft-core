<% if user.errors.any? %>
  <div class="alert alert-warning alert-bordered">
    <button type="button" class="close" data-dismiss="alert"><span>Ã—</span><span class="sr-only">Close</span></button>
    <div id="error_explanation">
      <h2><%= pluralize(user.errors.count, "error") %> prohibited this slide from being saved:</h2>
  
      <ul>
      <% user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  </div>
<% end %>

<div class="panel panel-flat">
  
  <div class="panel-heading"></div>
  
  <div class="panel-body">

    <%= form_for([naturesoft, :admin, user], html: {class: "validate", multipart: true}) do |f| %>
      
      <div class="row">
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
            <label class="control-label" ><%= t(:avatar) %> </label>
            <div class="no-margin-top">
              <div class="avatar-box pull-left img-circle" style="">
                <% if !user.image.present? %>
                  <%= image_tag("/backend/assets/images/placeholder.jpg", class: "",  "preview-for": "user[image]") %>
                <% else %>
                  <%= image_tag(user.image.system, size: "80x80", class: "",  "preview-for": "user[image]") %>
                <% end %>
              </div>
        
              <div class="media-body">
                <input type="file" name="user[image]" class="file-styled previewable">
                <span class="help-block">Accepted formats: gif, png, jpg.</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
            <label class="control-label" ><%= t(:email) %> <span class='text-danger'>*</span></label>
            <div class="">
              <%= f.text_field :email, class: "form-control required email" %>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
            <label class="control-label" ><%= t(:first_name) %> <span class='text-danger'>*</span></label>
            <div class="">
              <%= f.text_field :first_name, class: "form-control required" %>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
            <label class="control-label" ><%= t(:last_name) %> <span class='text-danger'>*</span></label>
            <div class="">
              <%= f.text_field :last_name, class: "form-control required" %>
            </div>
          </div>
        </div>
      </div>
      
      <% if user.id.nil? %>
        <div class="row">
          <div class="col-sm-6 col-md-6">
            <div class="form-group">
              <label class="control-label" ><%= t(:password) %> <span class='text-danger'>*</span></label>
              <div class="">
                <%= f.password_field :password, class: "form-control required" %>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6">
            <div class="form-group">
              <label class="control-label" ><%= t(:password_confirmation) %> <span class='text-danger'>*</span></label>
              <div class="">
                <%= f.password_field :password_confirmation, class: "form-control required" %>
              </div>
            </div>
          </div>
        </div>
      <% else %>
        <h3>Change password</h3>
        <div class="row">
          <div class="col-sm-6 col-md-6">
            <div class="form-group">
              <label class="control-label" ><%= t(:password) %></label>
              <div class="">
                <%= f.password_field :password, class: "form-control" %>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6">
            <div class="form-group">
              <label class="control-label" ><%= t(:password_confirmation) %></label>
              <div class="">
                <%= f.password_field :password_confirmation, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
      
      <h3><%= t(:permission) %></h3>
        <div class="row">
          <div class="col-sm-6 col-md-6">
            <div class="form-group">
              <label class="control-label" ><%= t(:user_group) %> <span class='text-danger'>*</span></label>
              <div class="">
                <div class="input-group">
                  <% selected = options_for_select([[user.user_group.name, user.user_group_id]], user.user_group_id) if user.user_group.present? %>
                  <%= select_tag("user[user_group_id]",
                    selected,
                    {
                      class: "select2-ajax required",
                      include_blank: "none",
                      "data-url": select2_admin_user_groups_path,
                    }
                  ) %>
                  <span class="input-group-btn">
                    <a class="btn btn-info" href="<%= naturesoft.new_admin_user_group_path %>"><i class="icon-plus2"></i></a>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
    
      <div class="text-right">
        <%= button_tag "#{t(:save)}<i class=\"icon-check position-right\"></i>".html_safe, class: "btn btn-primary"%>
      </div>
        
    <% end %>
  </div>
</div>
